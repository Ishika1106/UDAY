<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Uday Student Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body {
  background: linear-gradient(135deg,#0a0a0a,#1e003e,#001a33);
  color:#fff;
  font-family:sans-serif;
}
/* Refined Card Style */
.card {
  background: #1e003e; /* Dark Purple Background */
  border: 1px solid #7f00ff; /* Bright Purple Border */
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 0 15px rgba(127, 0, 255, 0.5); /* Glowing Shadow */
}

/* Chat Widget Styling and Positioning (FIXED) */
.chat-widget {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 340px;
  max-height: 450px; /* Max height when expanded */
  height: 50px; /* Initial height (collapsed) */
  border: 2px solid #7f00ff;
  border-radius: 12px;
  overflow: hidden;
  background: #1e003e;
  display: flex;
  flex-direction: column;
  box-shadow: 0 0 25px rgba(127, 0, 255, 0.7);
  z-index: 1000;
  transition: height 0.3s ease-in-out; /* Smooth toggle animation */
}
.chat-widget.expanded {
    height: 450px;
}
.chat-header {
  background: #7f00ff;
  padding: 12px;
  font-weight: bold;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0; /* Prevent header from shrinking */
}
.chat-box {
  flex: 1;
  padding: 10px;
  overflow-y: auto;
  display: none; /* Controlled by JS now */
}
.chat-input-container {
  display: none; /* Controlled by JS now */
  border-top: 1px solid #7f00ff;
  flex-shrink: 0;
}
.chat-input {
  flex: 1;
  padding: 10px;
  border: none;
  outline: none;
  background: #0d0d2b;
  color: #fff;
}
.chat-send-btn {
  padding: 10px 15px;
  background: #00bfff;
  border: none;
  cursor: pointer;
}
.message {
  margin: 5px 0;
  padding: 8px 12px;
  border-radius: 16px;
  max-width: 80%;
  word-wrap: break-word;
}
.user { background: #7f00ff; text-align: right; margin-left: auto; }
.bot { background: #00bfff; text-align: left; margin-right: auto; }

/* Responsive dashboard grid */
.dashboard-grid {
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(300px,1fr));
  gap:20px;
}
</style>
</head>
<body class="min-h-screen p-6">

<h1 id="mainTitle" class="text-4xl font-extrabold mb-8 text-purple-400 text-center flex items-center justify-center gap-3">
    <i class="fas fa-user-graduate"></i> Student Dashboard
</h1>

<div class="mb-4 max-w-lg mx-auto flex justify-end">
    <select id="languageSelect" class="p-2 rounded bg-gray-700 text-white border border-purple-600">
        <option value="eng">English</option>
        <option value="hin">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
        <option value="kan">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</option>
        <option value="mar">‡§Æ‡§æ‡§∞‡§µ‡§æ‡§°‡§º‡•Ä (Marwari)</option>
    </select>
</div>

<div class="mb-10 max-w-md mx-auto p-4 card">
  <label for="studentNameInput" id="labelNameInput" class="block text-gray-300 font-semibold mb-2">Enter Your Name to Load Data</label>
  <input type="text" id="studentNameInput" placeholder="e.g., Alice" class="p-3 rounded bg-gray-700 text-white w-full border border-purple-600 focus:ring-2 focus:ring-purple-500">
  <button onclick="loadStudentData()" id="loadDataBtn" class="mt-3 w-full bg-purple-600 hover:bg-purple-700 p-3 rounded font-bold transition flex items-center justify-center gap-2">
    <i class="fas fa-database"></i> Load My Data
  </button>
</div>

<div class="dashboard-grid mb-6">
  <div class="card">
    <h2 id="sessionsTitle" class="text-xl font-bold text-blue-300 mb-4"><i class="fas fa-calendar-alt"></i> My Sessions</h2>
    <p id="sessionsFilterText" class="text-sm text-gray-400 mb-2">Filter data by session:</p>
    <select id="sessionSelect" class="w-full p-2 rounded bg-gray-700 text-white border border-blue-500">
      <option id="selectSessionOption" value="">Select Session</option>
    </select>
  </div>

  <div class="card">
    <h2 id="dataTitle" class="text-xl font-bold text-green-300 mb-4"><i class="fas fa-id-card"></i> My Data</h2>
    <div id="studentInfo" class="space-y-2 text-lg">
        <p id="dataPlaceholder" class="text-gray-400">Data will appear here after loading.</p>
    </div>
  </div>

  <div class="card">
    <h2 id="chartTitle" class="text-xl font-bold text-yellow-300 mb-4"><i class="fas fa-chart-bar"></i> Performance Chart</h2>
    <canvas id="studentChart" height="200"></canvas>
  </div>
</div>

<div class="chat-widget" id="chatWidget">
  <div class="chat-header" onclick="toggleChat()">
    <span id="chatHeaderTitle" class="text-white">üí¨ Uday Assistant</span>
    <span id="chatToggle" class="cursor-pointer text-white">+</span>
  </div>
  <div class="chat-box" id="chatBox"></div>
  <div class="chat-input-container">
    <input type="text" id="chatInput" class="chat-input" placeholder="Type your message...">
    <button class="chat-send-btn text-white font-semibold" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
  </div>
</div>

<script>
// --- Translations ---
const langData = {
    eng: {
        mainTitle: "Student Dashboard",
        loadNameLabel: "Enter Your Name to Load Data",
        namePlaceholder: "e.g., Alice",
        loadDataBtn: "Load My Data",
        sessionsTitle: "My Sessions",
        sessionsFilterText: "Filter data by session:",
        selectSessionOption: "Select Session",
        dataTitle: "My Data",
        dataPlaceholder: "Data will appear here after loading.",
        chartTitle: "Performance Chart",
        chatHeaderTitle: "üí¨ Uday Assistant",
        chatInputPlaceholder: "Type your message...",
        // Data Labels
        labelName: "Name:",
        labelClass: "Class:",
        labelAttendance: "Attendance:",
        labelMarks: "Marks:",
        labelFeesStatus: "Fees Status:",
        // Chart Labels
        chartLabelAttendance: "Attendance (%)",
        chartLabelMarks: "Marks (Out of 100)",
        chartLabelFeesStatus: "Fees Paid Status",
        chartTitleText: "Overall Performance Breakdown",
        // Chat Responses
        chatHello: (name) => `Hello ${name}! I am your dashboard assistant. Ask me about attendance, marks, fees, sessions, or tips!`,
        chatNotLoaded: "Please load your data first by entering your name and clicking 'Load My Data'!",
        chatNotFound: (name) => `Student "${name}" not found. Try Alice, Bob, Charlie, or Uday.`,
        chatAttendance: (count, total, percent) => `Your total attendance is **${count}** out of **${total}** sessions, which is **${percent}%**. Keep up the great work!`,
        chatMarks: (marks) => `Your marks are **${marks || 'N/A'}** out of 100.`,
        chatFeesPaid: "Fees are all clear! üëç",
        chatFeesUnpaid: "Please check with the college office to clear any pending fees.",
        chatFeesStatus: (status) => `Your fees status is: **${status || 'N/A'}**.`,
        chatSessions: (length) => `Your total sessions are **${length}**. You can see the full list in the 'My Sessions' filter.`,
        chatNoSessions: "No sessions available yet.",
        chatRisk: (risk, marks) => `Based on your metrics (Marks: ${marks}), your current estimated dropout risk is approximately **${risk}%**. Focus on improving attendance and grades to lower this!`,
        chatDefault: "I'm not sure. Try asking me about **attendance**, **marks**, **fees**, **sessions**, or **tips**.",
        chatTips: ["Attend all sessions regularly! Your presence matters.", "Review your notes daily to reinforce learning.", "Clear doubts with your teacher promptly‚Äîdon't wait!", "Pay your fees on time to avoid administrative issues.", "Use the dashboard to track your performance weekly."],
    },
    hin: {
        mainTitle: "‡§õ‡§æ‡§§‡•ç‡§∞ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°",
        loadNameLabel: "‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç",
        namePlaceholder: "‡§â‡§¶‡§æ. ‡§è‡§≤‡§ø‡§∏",
        loadDataBtn: "‡§Æ‡•á‡§∞‡§æ ‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",
        sessionsTitle: "‡§Æ‡•á‡§∞‡•á ‡§∏‡§§‡•ç‡§∞",
        sessionsFilterText: "‡§∏‡§§‡•ç‡§∞ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§°‡•á‡§ü‡§æ ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç:",
        selectSessionOption: "‡§∏‡§§‡•ç‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç",
        dataTitle: "‡§Æ‡•á‡§∞‡§æ ‡§°‡•á‡§ü‡§æ",
        dataPlaceholder: "‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§π‡•ã‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§Ø‡§π‡§æ‡§Ç ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡•á‡§ó‡§æ‡•§",
        chartTitle: "‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§ö‡§æ‡§∞‡•ç‡§ü",
        chatHeaderTitle: "üí¨ ‡§â‡§¶‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§ï",
        chatInputPlaceholder: "‡§Ö‡§™‡§®‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≤‡§ø‡§ñ‡•á‡§Ç...",
        // Data Labels
        labelName: "‡§®‡§æ‡§Æ:",
        labelClass: "‡§ï‡§ï‡•ç‡§∑‡§æ:",
        labelAttendance: "‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø:",
        labelMarks: "‡§Ö‡§Ç‡§ï:",
        labelFeesStatus: "‡§∂‡•Å‡§≤‡•ç‡§ï ‡§∏‡•ç‡§•‡§ø‡§§‡§ø:",
        // Chart Labels
        chartLabelAttendance: "‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø (%)",
        chartLabelMarks: "‡§Ö‡§Ç‡§ï (100 ‡§Æ‡•á‡§Ç ‡§∏‡•á)",
        chartLabelFeesStatus: "‡§∂‡•Å‡§≤‡•ç‡§ï ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§∏‡•ç‡§•‡§ø‡§§‡§ø",
        chartTitleText: "‡§∏‡§Æ‡§ó‡•ç‡§∞ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§¨‡•ç‡§∞‡•á‡§ï‡§°‡§æ‡§â‡§®",
        // Chat Responses
        chatHello: (name) => `‡§®‡§Æ‡§∏‡•ç‡§§‡•á ${name}! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Å‡•§ ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø, ‡§Ö‡§Ç‡§ï, ‡§´‡•Ä‡§∏, ‡§∏‡§§‡•ç‡§∞, ‡§Ø‡§æ ‡§∏‡•Å‡§ù‡§æ‡§µ‡•ã‡§Ç ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ‡•á‡§Ç!`,
        chatNotLoaded: "‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡§ï‡•á '‡§Æ‡•á‡§∞‡§æ ‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç' ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§ï‡•á ‡§Ö‡§™‡§®‡§æ ‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç!",
        chatNotFound: (name) => `‡§õ‡§æ‡§§‡•ç‡§∞ "${name}" ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§ ‡§è‡§≤‡§ø‡§∏, ‡§¨‡•â‡§¨, ‡§ö‡§æ‡§∞‡•ç‡§≤‡•Ä, ‡§Ø‡§æ ‡§â‡§¶‡§Ø ‡§Ü‡§ú‡§º‡§Æ‡§æ‡§è‡§Å‡•§`,
        chatAttendance: (count, total, percent) => `‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•Å‡§≤ ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø **${total}** ‡§∏‡§§‡•ç‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•á **${count}** ‡§π‡•à, ‡§ú‡•ã **${percent}%** ‡§π‡•à‡•§ ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡•á ‡§∞‡§π‡•á‡§Ç!`,
        chatMarks: (marks) => `‡§Ü‡§™‡§ï‡•á ‡§Ö‡§Ç‡§ï 100 ‡§Æ‡•á‡§Ç ‡§∏‡•á **${marks || 'N/A'}** ‡§π‡•à‡§Ç‡•§`,
        chatFeesPaid: "‡§∂‡•Å‡§≤‡•ç‡§ï ‡§∏‡§¨ ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü ‡§π‡•à! üëç",
        chatFeesUnpaid: "‡§ï‡•É‡§™‡§Ø‡§æ ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§≤‡§Ç‡§¨‡§ø‡§§ ‡§∂‡•Å‡§≤‡•ç‡§ï ‡§ï‡•ã ‡§®‡§ø‡§™‡§ü‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•â‡§≤‡•á‡§ú ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§",
        chatFeesStatus: (status) => `‡§Ü‡§™‡§ï‡•Ä ‡§∂‡•Å‡§≤‡•ç‡§ï ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§π‡•à: **${status || 'N/A'}**‡•§`,
        chatSessions: (length) => `‡§Ü‡§™‡§ï‡•á ‡§ï‡•Å‡§≤ ‡§∏‡§§‡•ç‡§∞ **${length}** ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™ ‡§™‡•Ç‡§∞‡•Ä ‡§∏‡•Ç‡§ö‡•Ä '‡§Æ‡•á‡§∞‡•á ‡§∏‡§§‡•ç‡§∞' ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§ñ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§`,
        chatNoSessions: "‡§Ö‡§≠‡•Ä ‡§ï‡•ã‡§à ‡§∏‡§§‡•ç‡§∞ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§",
        chatRisk: (risk, marks) => `‡§Ü‡§™‡§ï‡•á ‡§Æ‡•á‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏ (‡§Ö‡§Ç‡§ï: ${marks}) ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞, ‡§Ü‡§™‡§ï‡§æ ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡§ø‡§§ ‡§°‡•ç‡§∞‡•â‡§™‡§Ü‡§â‡§ü ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§≤‡§ó‡§≠‡§ó **${risk}%** ‡§π‡•à‡•§ ‡§á‡§∏‡•á ‡§ï‡§Æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§î‡§∞ ‡§ó‡•ç‡§∞‡•á‡§° ‡§™‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç!`,
        chatDefault: "‡§Æ‡•Å‡§ù‡•á ‡§Ø‡§ï‡•Ä‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ **‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø**, **‡§Ö‡§Ç‡§ï**, **‡§´‡•Ä‡§∏**, **‡§∏‡§§‡•ç‡§∞**, ‡§Ø‡§æ **‡§∏‡•Å‡§ù‡§æ‡§µ‡•ã‡§Ç** ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ‡§®‡•á ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§",
        chatTips: ["‡§∏‡§≠‡•Ä ‡§∏‡§§‡•ç‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§≠‡§æ‡§ó ‡§≤‡•á‡§Ç! ‡§Ü‡§™‡§ï‡•Ä ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§Æ‡§æ‡§Ø‡§®‡•á ‡§∞‡§ñ‡§§‡•Ä ‡§π‡•à‡•§", "‡§∏‡•Ä‡§ñ‡§®‡•á ‡§ï‡•ã ‡§Æ‡§ú‡§¨‡•Ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∞‡•ã‡§ú‡§æ‡§®‡§æ ‡§Ö‡§™‡§®‡•á ‡§®‡•ã‡§ü‡•ç‡§∏ ‡§ï‡•Ä ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§", "‡§Ö‡§™‡§®‡•á ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§∏‡•á ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§∏‡§Ç‡§¶‡•á‡§π ‡§¶‡•Ç‡§∞ ‡§ï‡§∞‡•á‡§Ç‚Äî‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§® ‡§ï‡§∞‡•á‡§Ç!", "‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§®‡§ø‡§ï ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§ì‡§Ç ‡§∏‡•á ‡§¨‡§ö‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Æ‡§Ø ‡§™‡§∞ ‡§Ö‡§™‡§®‡•Ä ‡§´‡•Ä‡§∏ ‡§ï‡§æ ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§", "‡§∏‡§æ‡§™‡•ç‡§§‡§æ‡§π‡§ø‡§ï ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§Ö‡§™‡§®‡•á ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡•ã ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§"],
    },
    kan: {
        mainTitle: "‡≤µ‡≤ø‡≤¶‡≥ç‡≤Ø‡≤æ‡≤∞‡≥ç‡≤•‡≤ø ‡≤°‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç‚Äå‡≤¨‡≥ã‡≤∞‡≥ç‡≤°‡≥ç",
        loadNameLabel: "‡≤°‡≥á‡≤ü‡≤æ ‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤π‡≥Ü‡≤∏‡≤∞‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤Æ‡≥Ç‡≤¶‡≤ø‡≤∏‡≤ø",
        namePlaceholder: "‡≤â‡≤¶‡≤æ. ‡≤Ö‡≤≤‡≤ø‡≤∏‡≥ç",
        loadDataBtn: "‡≤®‡≤®‡≥ç‡≤® ‡≤°‡≥á‡≤ü‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø",
        sessionsTitle: "‡≤®‡≤®‡≥ç‡≤® ‡≤∏‡≥Ü‡≤∑‡≤®‡≥ç‚Äå‡≤ó‡≤≥‡≥Å",
        sessionsFilterText: "‡≤∏‡≥Ü‡≤∑‡≤®‡≥ç ‡≤Æ‡≥Ç‡≤≤‡≤ï ‡≤°‡≥á‡≤ü‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤´‡≤ø‡≤≤‡≥ç‡≤ü‡≤∞‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø:",
        selectSessionOption: "‡≤∏‡≥Ü‡≤∑‡≤®‡≥ç ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø",
        dataTitle: "‡≤®‡≤®‡≥ç‡≤® ‡≤°‡≥á‡≤ü‡≤æ",
        dataPlaceholder: "‡≤°‡≥á‡≤ü‡≤æ ‡≤≤‡≥ã‡≤°‡≥ç ‡≤Ü‡≤¶ ‡≤®‡≤Ç‡≤§‡≤∞ ‡≤á‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ï‡≤æ‡≤£‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.",
        chartTitle: "‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø‡≤ï‡≥ç‡≤∑‡≤Æ‡≤§‡≥Ü ‡≤ö‡≤æ‡≤∞‡≥ç‡≤ü‡≥ç",
        chatHeaderTitle: "üí¨ ‡≤â‡≤¶‡≤Ø‡≥ç ‡≤∏‡≤π‡≤æ‡≤Ø‡≤ï",
        chatInputPlaceholder: "‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤∏‡≤Ç‡≤¶‡≥á‡≤∂‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤ü‡≥à‡≤™‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø...",
        // Data Labels
        labelName: "‡≤π‡≥Ü‡≤∏‡≤∞‡≥Å:",
        labelClass: "‡≤§‡≤∞‡≤ó‡≤§‡≤ø:",
        labelAttendance: "‡≤π‡≤æ‡≤ú‡≤∞‡≤æ‡≤§‡≤ø:",
        labelMarks: "‡≤Ö‡≤Ç‡≤ï‡≤ó‡≤≥‡≥Å:",
        labelFeesStatus: "‡≤∂‡≥Å‡≤≤‡≥ç‡≤ï ‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø:",
        // Chart Labels
        chartLabelAttendance: "‡≤π‡≤æ‡≤ú‡≤∞‡≤æ‡≤§‡≤ø (%)",
        chartLabelMarks: "‡≤Ö‡≤Ç‡≤ï‡≤ó‡≤≥‡≥Å (100 ‡≤∞‡≤≤‡≥ç‡≤≤‡≤ø)",
        chartLabelFeesStatus: "‡≤∂‡≥Å‡≤≤‡≥ç‡≤ï ‡≤™‡≤æ‡≤µ‡≤§‡≤ø ‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø",
        chartTitleText: "‡≤í‡≤ü‡≥ç‡≤ü‡≤æ‡≤∞‡≥Ü ‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø‡≤ï‡≥ç‡≤∑‡≤Æ‡≤§‡≥Ü‡≤Ø ‡≤µ‡≤ø‡≤≠‡≤ú‡≤®‡≥Ü",
        // Chat Responses
        chatHello: (name) => `‡≤®‡≤Æ‡≤∏‡≥ç‡≤ï‡≤æ‡≤∞ ${name}! ‡≤®‡≤æ‡≤®‡≥Å ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤°‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç‚Äå‡≤¨‡≥ã‡≤∞‡≥ç‡≤°‡≥ç ‡≤∏‡≤π‡≤æ‡≤Ø‡≤ï. ‡≤π‡≤æ‡≤ú‡≤∞‡≤æ‡≤§‡≤ø, ‡≤Ö‡≤Ç‡≤ï‡≤ó‡≤≥‡≥Å, ‡≤∂‡≥Å‡≤≤‡≥ç‡≤ï, ‡≤∏‡≥Ü‡≤∑‡≤®‡≥ç‚Äå‡≤ó‡≤≥‡≥Å ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤∏‡≤≤‡≤π‡≥Ü‡≤ó‡≤≥ ‡≤¨‡≤ó‡≥ç‡≤ó‡≥Ü ‡≤ï‡≥á‡≤≥‡≤ø!`,
        chatNotLoaded: "‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤Æ‡≥ä‡≤¶‡≤≤‡≥Å ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤π‡≥Ü‡≤∏‡≤∞‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤Æ‡≥Ç‡≤¶‡≤ø‡≤∏‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å '‡≤®‡≤®‡≥ç‡≤® ‡≤°‡≥á‡≤ü‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø' ‡≤ï‡≥ç‡≤≤‡≤ø‡≤ï‡≥ç ‡≤Æ‡≤æ‡≤°‡≥Å‡≤µ ‡≤Æ‡≥Ç‡≤≤‡≤ï ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤°‡≥á‡≤ü‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø!",
        chatNotFound: (name) => `‡≤µ‡≤ø‡≤¶‡≥ç‡≤Ø‡≤æ‡≤∞‡≥ç‡≤•‡≤ø "${name}" ‡≤ï‡≤Ç‡≤°‡≥Å‡≤¨‡≤Ç‡≤¶‡≤ø‡≤≤‡≥ç‡≤≤. ‡≤Ö‡≤≤‡≤ø‡≤∏‡≥ç, ‡≤¨‡≤æ‡≤¨‡≥ç, ‡≤ö‡≤æ‡≤∞‡≥ç‡≤≤‡≤ø, ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤â‡≤¶‡≤Ø‡≥ç ‡≤™‡≥ç‡≤∞‡≤Ø‡≤§‡≥ç‡≤®‡≤ø‡≤∏‡≤ø.`,
        chatAttendance: (count, total, percent) => `‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤í‡≤ü‡≥ç‡≤ü‡≥Å ‡≤π‡≤æ‡≤ú‡≤∞‡≤æ‡≤§‡≤ø **${total}** ‡≤∏‡≥Ü‡≤∑‡≤®‡≥ç‚Äå‡≤ó‡≤≥‡≤≤‡≥ç‡≤≤‡≤ø **${count}** ‡≤Ü‡≤ó‡≤ø‡≤¶‡≥Ü, ‡≤Ö‡≤Ç‡≤¶‡≤∞‡≥Ü **${percent}%** ‡≤Ü‡≤ó‡≤ø‡≤¶‡≥Ü. ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤â‡≤§‡≥ç‡≤§‡≤Æ ‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø ‡≤Æ‡≥Å‡≤Ç‡≤¶‡≥Å‡≤µ‡≤∞‡≤ø‡≤∏‡≤ø!`,
        chatMarks: (marks) => `‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤Ö‡≤Ç‡≤ï‡≤ó‡≤≥‡≥Å 100‡≤ï‡≥ç‡≤ï‡≥Ü **${marks || 'N/A'}** ‡≤á‡≤µ‡≥Ü.`,
        chatFeesPaid: "‡≤∂‡≥Å‡≤≤‡≥ç‡≤ï ‡≤é‡≤≤‡≥ç‡≤≤‡≤æ ‡≤§‡≥Ü‡≤∞‡≤µ‡≥Å‡≤ó‡≥ä‡≤Ç‡≤°‡≤ø‡≤¶‡≥Ü! üëç",
        chatFeesUnpaid: "‡≤¨‡≤æ‡≤ï‡≤ø ‡≤á‡≤∞‡≥Å‡≤µ ‡≤Ø‡≤æ‡≤µ‡≥Å‡≤¶‡≥á ‡≤∂‡≥Å‡≤≤‡≥ç‡≤ï‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≥Ü‡≤∞‡≤µ‡≥Å‡≤ó‡≥ä‡≤≥‡≤ø‡≤∏‡≤≤‡≥Å ‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤ï‡≤æ‡≤≤‡≥á‡≤ú‡≥Å ‡≤ï‡≤ö‡≥á‡≤∞‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤ø‡≤∏‡≤ø.",
        chatFeesStatus: (status) => `‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤∂‡≥Å‡≤≤‡≥ç‡≤ï‡≤¶ ‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø: **${status || 'N/A'}** ‡≤Ü‡≤ó‡≤ø‡≤¶‡≥Ü.`,
        chatSessions: (length) => `‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤í‡≤ü‡≥ç‡≤ü‡≥Å ‡≤∏‡≥Ü‡≤∑‡≤®‡≥ç‚Äå‡≤ó‡≤≥‡≥Å **${length}** ‡≤á‡≤µ‡≥Ü. '‡≤®‡≤®‡≥ç‡≤® ‡≤∏‡≥Ü‡≤∑‡≤®‡≥ç‚Äå‡≤ó‡≤≥‡≥Å' ‡≤´‡≤ø‡≤≤‡≥ç‡≤ü‡≤∞‡≥ç‚Äå‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤®‡≥Ä‡≤µ‡≥Å ‡≤∏‡≤Ç‡≤™‡≥Ç‡≤∞‡≥ç‡≤£ ‡≤™‡≤ü‡≥ç‡≤ü‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≥ã‡≤°‡≤¨‡≤π‡≥Å‡≤¶‡≥Å.`,
        chatNoSessions: "‡≤Ø‡≤æ‡≤µ‡≥Å‡≤¶‡≥á ‡≤∏‡≥Ü‡≤∑‡≤®‡≥ç‚Äå‡≤ó‡≤≥‡≥Å ‡≤á‡≤®‡≥ç‡≤®‡≥Ç ‡≤≤‡≤≠‡≥ç‡≤Ø‡≤µ‡≤ø‡≤≤‡≥ç‡≤≤.",
        chatRisk: (risk, marks) => `‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤Æ‡≥Ü‡≤ü‡≥ç‡≤∞‡≤ø‡≤ï‡≥ç‚Äå‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å (‡≤Ö‡≤Ç‡≤ï‡≤ó‡≤≥‡≥Å: ${marks}) ‡≤Ü‡≤ß‡≤∞‡≤ø‡≤∏‡≤ø, ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤™‡≥ç‡≤∞‡≤∏‡≥ç‡≤§‡≥Å‡≤§ ‡≤Ö‡≤Ç‡≤¶‡≤æ‡≤ú‡≥Å ‡≤°‡≥ç‡≤∞‡≤æ‡≤™‡≥ç‚Äå‡≤î‡≤ü‡≥ç ‡≤Ö‡≤™‡≤æ‡≤Ø‡≤µ‡≥Å ‡≤∏‡≤∞‡≤ø‡≤∏‡≥Å‡≤Æ‡≤æ‡≤∞‡≥Å **${risk}%** ‡≤Ü‡≤ó‡≤ø‡≤¶‡≥Ü. ‡≤á‡≤¶‡≤®‡≥ç‡≤®‡≥Å ‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å ‡≤π‡≤æ‡≤ú‡≤∞‡≤æ‡≤§‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤ó‡≥ç‡≤∞‡≥á‡≤°‡≥ç‚Äå‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥Å‡≤ß‡≤æ‡≤∞‡≤ø‡≤∏‡≥Å‡≤µ‡≥Å‡≤¶‡≤∞ ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤ï‡≥á‡≤Ç‡≤¶‡≥ç‡≤∞‡≥Ä‡≤ï‡≤∞‡≤ø‡≤∏‡≤ø!`,
        chatDefault: "‡≤®‡≤®‡≤ó‡≥Ü ‡≤ñ‡≤ö‡≤ø‡≤§‡≤µ‡≤ø‡≤≤‡≥ç‡≤≤. **‡≤π‡≤æ‡≤ú‡≤∞‡≤æ‡≤§‡≤ø**, **‡≤Ö‡≤Ç‡≤ï‡≤ó‡≤≥‡≥Å**, **‡≤∂‡≥Å‡≤≤‡≥ç‡≤ï**, **‡≤∏‡≥Ü‡≤∑‡≤®‡≥ç‚Äå‡≤ó‡≤≥‡≥Å**, ‡≤Ö‡≤•‡≤µ‡≤æ **‡≤∏‡≤≤‡≤π‡≥Ü‡≤ó‡≤≥** ‡≤¨‡≤ó‡≥ç‡≤ó‡≥Ü ‡≤ï‡≥á‡≤≥‡≤≤‡≥Å ‡≤™‡≥ç‡≤∞‡≤Ø‡≤§‡≥ç‡≤®‡≤ø‡≤∏‡≤ø.",
        chatTips: ["‡≤é‡≤≤‡≥ç‡≤≤‡≤æ ‡≤∏‡≥Ü‡≤∑‡≤®‡≥ç‚Äå‡≤ó‡≤≥‡≤ø‡≤ó‡≥Ü ‡≤®‡≤ø‡≤Ø‡≤Æ‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø ‡≤π‡≤æ‡≤ú‡≤∞‡≤æ‡≤ó‡≤ø! ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤â‡≤™‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø ‡≤Æ‡≥Å‡≤ñ‡≥ç‡≤Ø‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.", "‡≤ï‡≤≤‡≤ø‡≤ï‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤≤‡≤™‡≤°‡≤ø‡≤∏‡≤≤‡≥Å ‡≤™‡≥ç‡≤∞‡≤§‡≤ø‡≤¶‡≤ø‡≤® ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤ü‡≤ø‡≤™‡≥ç‡≤™‡≤£‡≤ø‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤ø‡≤∏‡≤ø.", "‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤∂‡≤ø‡≤ï‡≥ç‡≤∑‡≤ï‡≤∞‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤§‡≤ï‡≥ç‡≤∑‡≤£‡≤µ‡≥á ‡≤Ö‡≤®‡≥Å‡≤Æ‡≤æ‡≤®‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≥Ü‡≤∞‡≤µ‡≥Å‡≤ó‡≥ä‡≤≥‡≤ø‡≤∏‡≤ø‚Äî‡≤ï‡≤æ‡≤Ø‡≤¨‡≥á‡≤°‡≤ø!", "‡≤Ü‡≤°‡≤≥‡≤ø‡≤§‡≤æ‡≤§‡≥ç‡≤Æ‡≤ï ‡≤∏‡≤Æ‡≤∏‡≥ç‡≤Ø‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≤™‡≥ç‡≤™‡≤ø‡≤∏‡≤≤‡≥Å ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤∂‡≥Å‡≤≤‡≥ç‡≤ï‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≤Æ‡≤Ø‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤™‡≤æ‡≤µ‡≤§‡≤ø‡≤∏‡≤ø.", "‡≤™‡≥ç‡≤∞‡≤§‡≤ø ‡≤µ‡≤æ‡≤∞ ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø‡≤ï‡≥ç‡≤∑‡≤Æ‡≤§‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤ü‡≥ç‡≤∞‡≥ç‡≤Ø‡≤æ‡≤ï‡≥ç ‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å ‡≤°‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç‚Äå‡≤¨‡≥ã‡≤∞‡≥ç‡≤°‡≥ç ‡≤¨‡≤≥‡≤∏‡≤ø."],
    },
    mar: {
        mainTitle: "‡§õ‡§æ‡§§‡•ç‡§∞ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°",
        loadNameLabel: "‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡§µ‡§æ ‡§ñ‡§æ‡§§‡§ø‡§∞ ‡§Ü‡§™ ‡§∞‡•ã ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•ã",
        namePlaceholder: "‡§ú‡•ç‡§Ø‡•Ç‡§Å: ‡§è‡§≤‡§ø‡§∏",
        loadDataBtn: "‡§Æ‡§æ‡§∞‡•ã ‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡•ã",
        sessionsTitle: "‡§Æ‡•ç‡§π‡§æ‡§∞‡§æ ‡§∏‡§§‡•ç‡§∞",
        sessionsFilterText: "‡§∏‡§§‡•ç‡§∞ ‡§∞‡•á ‡§π‡§ø‡§∏‡§æ‡§¨ ‡§∏‡•Ç‡§Ç ‡§°‡•á‡§ü‡§æ ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•ã:",
        selectSessionOption: "‡§∏‡§§‡•ç‡§∞ ‡§ö‡•Å‡§£‡•ã",
        dataTitle: "‡§Æ‡§æ‡§∞‡•ã ‡§°‡•á‡§ü‡§æ",
        dataPlaceholder: "‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§µ‡•ç‡§π‡§ø‡§Ø‡§æ ‡§™‡§õ‡•á ‡§Ö‡§†‡•á ‡§¶‡§ø‡§ï‡•á‡§≤‡§æ‡•§",
        chartTitle: "‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§ö‡§æ‡§∞‡•ç‡§ü",
        chatHeaderTitle: "üí¨ ‡§â‡§¶‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§ï",
        chatInputPlaceholder: "‡§Ü‡§™‡§∞‡•ã ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≤‡§ø‡§ñ‡•ã...",
        // Data Labels
        labelName: "‡§®‡§æ‡§Æ:",
        labelClass: "‡§ï‡§ï‡•ç‡§∑‡§æ:",
        labelAttendance: "‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡•Ä:",
        labelMarks: "‡§ó‡•Å‡§£:",
        labelFeesStatus: "‡§´‡•Ä‡§∏ ‡§∞‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä:",
        // Chart Labels
        chartLabelAttendance: "‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡•Ä (%)",
        chartLabelMarks: "‡§ó‡•Å‡§£ (100 ‡§Æ‡§æ‡§Å‡§Ø ‡§∏‡•Ç‡§Ç)",
        chartLabelFeesStatus: "‡§´‡•Ä‡§∏ ‡§ö‡•Å‡§ï‡§æ‡§µ‡§£‡•Ä ‡§∞‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä",
        chartTitleText: "‡§∏‡§ó‡§≥‡§æ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§∞‡•ã ‡§µ‡§ø‡§µ‡§∞‡§£",
        // Chat Responses
        chatHello: (name) => `‡§∞‡§æ‡§Æ-‡§∞‡§æ‡§Æ ${name}! ‡§Æ‡•Ç‡§Å ‡§•‡§æ‡§∞‡•ã ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Å‡•§ ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡•Ä, ‡§ó‡•Å‡§£, ‡§´‡•Ä‡§∏, ‡§∏‡§§‡•ç‡§∞, ‡§Ø‡§æ ‡§∏‡•Å‡§ù‡§æ‡§µ‡§æ‡§Å ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ‡•ã!`,
        chatNotLoaded: "‡§ï‡•É‡§™‡§æ ‡§ï‡§∞'‡§∞ ‡§™‡•á'‡§≤‡§æ ‡§Ü‡§™‡§∞‡•ã ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ'‡§∞ '‡§Æ‡§æ‡§∞‡•ã ‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡•ã' ‡§Æ‡§æ‡§•‡•á ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞'‡§∞ ‡§Ü‡§™‡§∞‡•ã ‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡•ã!",
        chatNotFound: (name) => `‡§õ‡§æ‡§§‡•ç‡§∞ "${name}" ‡§®‡•Ä ‡§Æ‡§ø‡§≤‡•ç‡§Ø‡•ã‡•§ ‡§è‡§≤‡§ø‡§∏, ‡§¨‡•â‡§¨, ‡§ö‡§æ‡§∞‡•ç‡§≤‡•Ä, ‡§Ø‡§æ ‡§â‡§¶‡§Ø ‡§Ü‡§ú‡§º‡§Æ‡§æ‡§ì‡•§`,
        chatAttendance: (count, total, percent) => `‡§•‡§æ‡§∞‡•Ä ‡§∏‡§ó‡§≥‡•Ä ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡•Ä **${total}** ‡§∏‡§§‡•ç‡§∞‡§æ‡§Å ‡§Æ‡§æ‡§Å‡§Ø ‡§∏‡•Ç‡§Ç **${count}** ‡§π‡•à, ‡§ú‡•ã **${percent}%** ‡§π‡•à‡•§ ‡§Ø‡•Ç‡§Å ‡§π‡•Ä ‡§¨‡§£‡§æ‡§Ø ‡§∞‡§æ‡§ñ‡•ã!`,
        chatMarks: (marks) => `‡§•‡§æ‡§∞‡§æ ‡§ó‡•Å‡§£ 100 ‡§Æ‡§æ‡§Å‡§Ø ‡§∏‡•Ç‡§Ç **${marks || 'N/A'}** ‡§π‡•à‡•§`,
        chatFeesPaid: "‡§´‡•Ä‡§∏ ‡§∏‡§ó‡§≥‡•Ä ‡§∏‡§æ‡§´ ‡§π‡•à! üëç",
        chatFeesUnpaid: "‡§ï‡•É‡§™‡§æ ‡§ï‡§∞'‡§∞ ‡§¨‡§ï‡§æ‡§Ø‡§æ ‡§´‡•Ä‡§∏ ‡§ö‡•Å‡§ï‡§æ‡§µ‡§£‡§æ ‡§ñ‡§æ‡§§‡§ø‡§∞ ‡§ï‡•â‡§≤‡•á‡§ú ‡§ë‡§´‡§ø‡§∏ ‡§∏‡•Ç‡§Ç ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•ã‡•§",
        chatFeesStatus: (status) => `‡§•‡§æ‡§∞‡•Ä ‡§´‡•Ä‡§∏ ‡§∞‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä ‡§π‡•à: **${status || 'N/A'}**‡•§`,
        chatSessions: (length) => `‡§•‡§æ‡§∞‡§æ ‡§∏‡§ó‡§≥‡§æ ‡§∏‡§§‡•ç‡§∞ **${length}** ‡§π‡•à‡•§ ‡§™‡•Ç‡§∞‡•Ä ‡§≤‡§ø‡§∏‡•ç‡§ü ‡§•‡•á‡§Ç '‡§Æ‡•ç‡§π‡§æ‡§∞‡§æ ‡§∏‡§§‡•ç‡§∞' ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§Æ‡§æ‡§Å‡§Ø ‡§¶‡•á‡§ñ ‡§∏‡§ï‡•ã‡•§`,
        chatNoSessions: "‡§π‡§æ‡§≤ ‡§ï‡•ã‡§à ‡§∏‡§§‡•ç‡§∞ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§ï‡•ã‡§®‡•Ä ‡§π‡•à‡•§",
        chatRisk: (risk, marks) => `‡§•‡§æ‡§∞‡§æ ‡§Æ‡•á‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏ (‡§ó‡•Å‡§£: ${marks}) ‡§∞‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§Æ‡§æ‡§•‡•á, ‡§•‡§æ‡§∞‡•ã ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡§ø‡§§ ‡§°‡•ç‡§∞‡•â‡§™‡§Ü‡§â‡§ü ‡§∞‡•ã ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§≤‡§ó‡§≠‡§ó **${risk}%** ‡§π‡•à‡•§ ‡§à‡§®‡•á‡§Ç ‡§ï‡§Æ ‡§ï‡§∞‡§£‡§æ ‡§ñ‡§æ‡§§‡§ø‡§∞ ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡•Ä ‡§Ö‡§∞ ‡§ó‡•ç‡§∞‡•á‡§° ‡§Æ‡§æ‡§•‡•á ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•ã!`,
        chatDefault: "‡§Æ‡•Ç‡§Å ‡§Ü‡§∂‡•ç‡§µ‡§∏‡•ç‡§§ ‡§ï‡•ã‡§®‡•Ä ‡§π‡•Ç‡§Å‡•§ **‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡•Ä**, **‡§ó‡•Å‡§£**, **‡§´‡•Ä‡§∏**, **‡§∏‡§§‡•ç‡§∞‡§æ‡§Å**, ‡§Ø‡§æ **‡§∏‡•Å‡§ù‡§æ‡§µ‡§æ‡§Å** ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ‡§£‡•ã ‡§∞‡•ã ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•ã‡•§",
        chatTips: ["‡§∏‡§ó‡§≥‡§æ ‡§∏‡§§‡•ç‡§∞‡§æ‡§Å ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•Ç‡§Ç ‡§π‡§æ‡§ú‡§º‡§ø‡§∞ ‡§∞‡•à‡§µ‡•ã! ‡§•‡§æ‡§∞‡•Ä ‡§Æ‡•å‡§ú‡•Ç‡§¶‡§ó‡•Ä ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à‡•§", "‡§∞‡•ã‡§ú‡§º ‡§Ü‡§™‡§∞‡•Ä ‡§®‡•ã‡§ü‡•ç‡§∏ ‡§∞‡•Ä ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞'‡§∞ ‡§∏‡§ø‡§ñ‡§£‡•ã ‡§Æ‡§ú‡§¨‡•Ç‡§§ ‡§ï‡§∞‡•ã‡•§", "‡§Ü‡§™‡§∞‡§æ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§∏‡•Ç‡§Ç ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§∂‡§Ç‡§ï‡§æ ‡§¶‡•Ç‡§∞ ‡§ï‡§∞‡•ã‚Äî‡§á‡§Ç‡§§‡•á‡§ú‡§º‡§æ‡§∞ ‡§Æ‡§§ ‡§ï‡§∞‡•ã!", "‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§®‡§ø‡§ï ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§µ‡§æ‡§Å ‡§∏‡•Ç‡§Ç ‡§¨‡§ö‡§£‡§æ ‡§ñ‡§æ‡§§‡§ø‡§∞ ‡§∏‡§Æ‡§Ø ‡§Æ‡§æ‡§•‡•á ‡§Ü‡§™‡§∞‡•Ä ‡§´‡•Ä‡§∏ ‡§ö‡•Å‡§ï‡§æ‡§ì‡•§", "‡§∏‡§æ‡§™‡•ç‡§§‡§æ‡§π‡§ø‡§ï ‡§∞‡•Ç‡§™ ‡§∏‡•Ç‡§Ç ‡§Ü‡§™‡§∞‡•ã ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡§£‡§æ ‡§ñ‡§æ‡§§‡§ø‡§∞ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§∞‡•ã ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•ã‡•§"],
    }
};
// --- Global Variables ---
let studentData = null;
let studentChart = null;
const sessionSelect = document.getElementById("sessionSelect");
const studentInfoDiv = document.getElementById("studentInfo");
const chatWidget = document.getElementById("chatWidget");
const chatBox = document.getElementById("chatBox");
const chatInput = document.getElementById("chatInput");
const languageSelect = document.getElementById("languageSelect");


// --- Mock Data Setup (CHANGED) ---
localStorage.clear(); // Ensure a clean mock environment

// Alice: High Performance. Bob: At-Risk. Charlie: Solid. Uday: Perfect.
const MOCK_EXCEL_DATA = [
  {Name:"Alice",Class:"10th",Marks:95,FeesStatus:"Paid"},
  {Name:"Bob",Class:"10th",Marks:62,FeesStatus:"Unpaid"},
  {Name:"Charlie",Class:"11th",Marks:85,FeesStatus:"Paid"},
  {Name:"Uday",Class:"12th",Marks:100,FeesStatus:"Paid"} 
];
const MOCK_SESSIONS = ["Session 1","Session 2","Session 3","Session 4"];
// Attendance data updated: Alice (3/4), Bob (2/4), Charlie (4/4), Uday (4/4)
const MOCK_ATTENDANCE = [
  {student:"Alice",session:"Session 1"},{student:"Alice",session:"Session 2"},{student:"Alice",session:"Session 4"},
  {student:"Bob",session:"Session 1"},{student:"Bob",session:"Session 3"},
  {student:"Charlie",session:"Session 1"},{student:"Charlie",session:"Session 2"},{student:"Charlie",session:"Session 3"},{student:"Charlie",session:"Session 4"},
  {student:"Uday",session:"Session 1"},{student:"Uday",session:"Session 2"},{student:"Uday",session:"Session 3"},{student:"Uday",session:"Session 4"}
];

localStorage.setItem("excelData",JSON.stringify(MOCK_EXCEL_DATA));
localStorage.setItem("sessions",JSON.stringify(MOCK_SESSIONS));
localStorage.setItem("attendance",JSON.stringify(MOCK_ATTENDANCE));

// --- Language Update Function ---

function updateLanguage(){
    const lang = languageSelect.value;
    const data = langData[lang];

    // Main Heading and Input
    document.getElementById("mainTitle").innerHTML = `<i class="fas fa-user-graduate"></i> ${data.mainTitle}`;
    document.getElementById("labelNameInput").innerText = data.loadNameLabel;
    document.getElementById("studentNameInput").placeholder = data.namePlaceholder;
    document.getElementById("loadDataBtn").innerHTML = `<i class="fas fa-database"></i> ${data.loadDataBtn}`;

    // Card Titles
    document.getElementById("sessionsTitle").innerHTML = `<i class="fas fa-calendar-alt"></i> ${data.sessionsTitle}`;
    document.getElementById("sessionsFilterText").innerText = data.sessionsFilterText;
    document.getElementById("selectSessionOption").innerText = data.selectSessionOption;
    document.getElementById("dataTitle").innerHTML = `<i class="fas fa-id-card"></i> ${data.dataTitle}`;
    document.getElementById("dataPlaceholder").innerText = data.dataPlaceholder;
    document.getElementById("chartTitle").innerHTML = `<i class="fas fa-chart-bar"></i> ${data.chartTitle}`;

    // Chat
    document.getElementById("chatHeaderTitle").innerHTML = `üí¨ ${data.chatHeaderTitle.substring(2)}`;
    document.getElementById("chatInput").placeholder = data.chatInputPlaceholder;

    // Redraw Student Info and Chart if data is loaded
    displayStudentInfo();
    
    // Clear chat history on language change for consistency
    chatBox.innerHTML = ''; 
    // Show a new welcome message
    if (studentData) {
        appendMessage(data.chatHello(studentData.Name), 'bot');
    }
}

// --- Initial Setup Functions ---

/** Loads session options on page load. */
function loadSessionOptions() {
    const lang = languageSelect.value;
    const data = langData[lang];
    
    sessionSelect.innerHTML = `<option value="">${data.selectSessionOption}</option>`;
    const sessions = JSON.parse(localStorage.getItem("sessions")) || [];
    sessions.forEach(s => { 
        const opt = document.createElement("option"); 
        opt.value = s; 
        opt.innerText = s; 
        sessionSelect.appendChild(opt); 
    });
}

/** Loads student data from mock storage based on name input. */
function loadStudentData(){
  const name = document.getElementById("studentNameInput").value.trim();
  const lang = languageSelect.value;
  const data = langData[lang];

  if(!name){ alert(data.loadNameLabel); return; }
  
  const excelData = JSON.parse(localStorage.getItem("excelData")) || [];
  studentData = excelData.find(s => s.Name.toLowerCase() === name.toLowerCase());
  
  if(!studentData){ 
    alert(data.chatNotFound(name)); 
    studentInfoDiv.innerHTML = `<p class="text-gray-400">${data.dataPlaceholder}</p>`;
    if(studentChart) studentChart.destroy();
    return; 
  }

  // Set initial chat message and update UI
  displayStudentInfo();
  appendMessage(data.chatHello(studentData.Name), 'bot');
}

// --- Data Display and Chart Functions ---

document.getElementById("sessionSelect").addEventListener("change", displayStudentInfo);
languageSelect.addEventListener("change", () => {
    loadSessionOptions();
    updateLanguage();
});

/** Calculates and displays student info based on selected session. */
function displayStudentInfo(){
  if(!studentData) return;
  
  const lang = languageSelect.value;
  const data = langData[lang];

  const selectedSession = document.getElementById("sessionSelect").value;
  const allAttendance = JSON.parse(localStorage.getItem("attendance")) || [];
  
  // Calculate attendance count
  const sessionAttendance = allAttendance.filter(a => 
      a.student.toLowerCase() === studentData.Name.toLowerCase() && 
      (!selectedSession || a.session === selectedSession)
  ).length;

  // Calculate total possible sessions for attendance percentage
  const totalSessions = JSON.parse(localStorage.getItem("sessions")).length;
  const attendancePercent = totalSessions > 0 ? ((sessionAttendance / totalSessions) * 100).toFixed(1) : 0;
  
  const feesStatus = studentData.FeesStatus || 'N/A';

  studentInfoDiv.innerHTML = `
    <p><strong><i class="fas fa-user"></i> ${data.labelName}</strong> ${studentData.Name}</p>
    <p><strong><i class="fas fa-graduation-cap"></i> ${data.labelClass}</strong> ${studentData.Class || 'N/A'}</p>
    <p><strong><i class="fas fa-check-circle"></i> ${data.labelAttendance}</strong> ${sessionAttendance} / ${totalSessions} sessions (${attendancePercent}%)</p>
    <p><strong><i class="fas fa-star"></i> ${data.labelMarks}</strong> ${studentData.Marks || 'N/A'} / 100</p>
    <p><strong><i class="fas fa-rupee-sign"></i> ${data.labelFeesStatus}</strong> <span class="${feesStatus === 'Paid' ? 'text-green-400' : 'text-red-400'}">${feesStatus}</span></p>
  `;
  
  renderStudentChart(parseFloat(attendancePercent), studentData.Marks || 0, studentData.FeesStatus);
}

/** Renders the student's performance data in a pie chart. */
function renderStudentChart(attendancePercent, marks, fees){
  const lang = languageSelect.value;
  const data = langData[lang];

  // Dynamic colors based on status for better visualization
  const attendanceColor = (attendancePercent > 70) ? '#00bfff' : '#ff9900'; // Blue for good, Orange for low
  const marksColor = (marks > 80) ? '#7f00ff' : '#ff0066'; // Purple for high, Pink/Red for low
  const feesColor = (fees.toLowerCase() === 'paid') ? '#00ff7f' : '#ff0000'; // Green for paid, Red for unpaid
  
  const feesPaid = (fees.toLowerCase() === 'paid') ? 100 : 0;
  
  if(studentChart) studentChart.destroy();
  const ctx = document.getElementById("studentChart").getContext("2d");
  
  studentChart = new Chart(ctx, {
    type: 'doughnut', 
    data: {
      labels: [data.chartLabelAttendance, data.chartLabelMarks, data.chartLabelFeesStatus],
      datasets: [
        {
          label: data.chartTitleText,
          data: [attendancePercent, marks, feesPaid], 
          backgroundColor: [attendanceColor, marksColor, feesColor], // Use dynamic colors
          borderWidth: 1
        }
      ]
    },
    options: {
        responsive: true, 
        plugins: {
            legend: { position: 'bottom', labels: { color: '#fff' } },
            title: { display: true, text: data.chartTitleText, color: '#fff' }
        }
    }
  });
}

// --- Chatbot Functions ---

/** Toggles the chatbot widget open/closed. */
function toggleChat(){
  const toggleIcon = document.getElementById("chatToggle");
  
  if(chatWidget.classList.contains("expanded")){
    // Collapse
    chatWidget.classList.remove("expanded");
    chatBox.style.display = "none";
    document.querySelector(".chat-input-container").style.display = "none";
    toggleIcon.innerText = "+";
  } else {
    // Expand
    chatWidget.classList.add("expanded");
    chatBox.style.display = "block";
    document.querySelector(".chat-input-container").style.display = "flex";
    toggleIcon.innerText = "‚àí";
    chatBox.scrollTop = chatBox.scrollHeight;
  }
}

document.getElementById("chatInput").addEventListener("keydown", function(e){ if(e.key==='Enter') sendMessage(); });

function sendMessage(){
  const msg = chatInput.value.trim();
  if(!msg) return;
  appendMessage(msg,'user');
  chatInput.value = '';
  setTimeout(() => respond(msg), 400);
}

function appendMessage(msg,type){
  const div = document.createElement("div");
  div.className = `message ${type}`;
  div.innerHTML = msg; // Use innerHTML to allow **bolding**
  chatBox.appendChild(div);
  chatBox.scrollTop = chatBox.scrollHeight;
}

function respond(msg){
  const lang = languageSelect.value;
  const data = langData[lang];
  const totalSessions = JSON.parse(localStorage.getItem("sessions")).length;

  if(!studentData){ appendMessage(data.chatNotLoaded,'bot'); return; }
  
  msg = msg.toLowerCase();
  let reply = data.chatDefault;

  if(msg.includes("attendance") || msg.includes("upasti") || msg.includes("haajiraati")) {
    const attendance = JSON.parse(localStorage.getItem("attendance")) || [];
    const count = attendance.filter(a => a.student.toLowerCase() === studentData.Name.toLowerCase()).length;
    const percent = totalSessions > 0 ? ((count / totalSessions) * 100).toFixed(1) : 0;
    reply = data.chatAttendance(count, totalSessions, percent);
  } else if(msg.includes("marks") || msg.includes("ank")) {
    reply = data.chatMarks(studentData.Marks);
  } else if(msg.includes("fees") || msg.includes("shulk")) {
    const status = studentData.FeesStatus || 'N/A';
    reply = data.chatFeesStatus(status);
    if (status.toLowerCase() === 'paid') {
        reply += ` ${data.chatFeesPaid}`;
    } else if (status.toLowerCase() === 'unpaid') {
        reply += ` ${data.chatFeesUnpaid}`;
    }
  } else if(msg.includes("session") || msg.includes("satra")) {
    const sessions = JSON.parse(localStorage.getItem("sessions")) || [];
    reply = sessions.length > 0 ? data.chatSessions(sessions.length) : data.chatNoSessions;
  } else if(msg.includes("risk") || msg.includes("dropout")) {
    const attendance = JSON.parse(localStorage.getItem("attendance")) || [];
    const attendanceCount = attendance.filter(a => a.student.toLowerCase() === studentData.Name.toLowerCase()).length;
    const attendancePercent = (attendanceCount / totalSessions);
    const marks = studentData.Marks || 0;
    const riskFactor = (1 - attendancePercent) * 50 + (100 - marks) * 0.5;
    const risk = Math.min(100, Math.max(0, riskFactor)).toFixed(0);
    
    reply = data.chatRisk(risk, marks);
  } else if(msg.includes("hi") || msg.includes("hello") || msg.includes("namaste")) {
    reply = data.chatHello(studentData.Name).split('!')[0] + '!'; // Shortened greeting
  } else if(msg.includes("tip") || msg.includes("advice") || msg.includes("sujhaav")) {
    const tips = data.chatTips;
    reply = `Here's a quick tip: **${tips[Math.floor(Math.random()*tips.length)]}**`;
  }
  appendMessage(reply,'bot');
}

// --- Initializer ---
document.addEventListener('DOMContentLoaded', () => {
    updateLanguage(); // Initial load to set English as default
    loadSessionOptions();
    // Start collapsed and let user manually open it for better initial UX
    chatWidget.classList.remove("expanded");
    document.getElementById("chatToggle").innerText = "+";
});
</script>

</body>
</html>